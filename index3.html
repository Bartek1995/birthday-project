<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finałowy filmik</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="style2.css">
    <style>
        body {
            background-image: url('https://www.tapeciarnia.pl/tapety/normalne/tapeta-dwukolorowe-bombki-i-gwiazdki-na-galazkach.jpg');
        }
    </style>
</head>
<body>
    <h1 class="custom-font fs-2 blue ml5">Z racji tego, że są Twoje urodziny oficjalnie możemy rozpocząć słuchanie świątecznych piosenek!</h1>
    <video src="wish_video.mp4" style="max-height: 80vh;" autoplay controls ></video>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        
function animateText(selector, callback) {
    var elements = document.querySelectorAll(selector);
    elements.forEach(function(element) {
        element.innerHTML = element.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
        
        anime.timeline({loop: false})
            .add({
                targets: selector + ' .letter',
                opacity: [0, 1],
                easing: "easeInOutQuad",
                duration: 200,  // Przyspieszenie animacji
                offset: '-=775',
                delay: function(el, i) {
                    return 50 * (i + 1);  // Przyspieszenie opóźnienia
                },
                complete: callback // Wywołaj callback po zakończeniu animacji
            });
    });
  }
  
  // Funkcja do uruchamiania animacji gdy element jest widoczny
  function setupAnimationObserver(selector, callback) {
    var observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateText(selector, callback);
                observer.unobserve(entry.target);  // Odłączenie obserwatora po uruchomieniu animacji
            }
        });
    }, { threshold: 0.1 });  // Uruchomienie gdy 10% elementu jest widoczne
  
    document.querySelectorAll(selector).forEach(element => {
        observer.observe(element);
    });
  }
  
  // Dodajemy callback do setupAnimationObserver dla .ml4
  setupAnimationObserver('.ml5');
    </script>
</body>
